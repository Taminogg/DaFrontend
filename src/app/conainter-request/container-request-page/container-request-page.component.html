<div class="overviewBox">
  <h1>{{ (htmlContent === "containerRequestCS" ? 'container-page-header-cs' : (htmlContent === "containerRequestTL" ?
    'container-page-header-tl' : 'shippment-page-header')) | transloco }}</h1>
  @if (htmlContent === 'containerRequestCS') {
  <button (click)="navigateToPage('/new-container-order-page')"><h2>{{'new' | transloco}}</h2></button>
  }
</div>

<div class="searchBox">
  <label>Filter:&nbsp;</label>
  <select #currFilter (change)="setSelectedFilter(currFilter.value)">
    <option value="customername">{{'customer' | transloco}}</option>
    <option value="createdBy">{{'created-by' | transloco}}</option>
    <option value="status">{{'status' | transloco}}</option>
    <option value="lastUpdated">{{'last-updated' | transloco}}</option>
    <option *ngIf="htmlContent !== 'productionPlanningCS'" value="approvedByCs">{{'approved' | transloco}}</option>
    <option *ngIf="htmlContent !== 'containerRequestTL' && htmlContent !== 'productionPlanningCS'" value="approvedByTl">
      {{'approved-by-tl' | transloco}}</option>
    <option value="amount">{{'amount' | transloco}}</option>
    <option value="country">{{'country' | transloco}}</option>
    <option value="sped">{{'sped' | transloco}}</option>
  </select>
  <div>
    <div
      *ngIf="selectedFilter() === 'customername' || selectedFilter() === 'createdBy' || selectedFilter() === 'country' || selectedFilter() === 'sped'">
      <div>
        <input (change)="filterOrders()" [ngSignal]="filterValue" type="text"
          placeholder="{{'search-placeholder' | transloco}}">
      </div>
    </div>
    <div *ngIf="selectedFilter() === 'amount' || selectedFilter() === 'status'">
      <div>
        <input (change)="filterOrders()" [ngSignal]="filterValue"
          type="{{selectedFilter() === 'amount' ? 'number' : 'text'}}">
      </div>
    </div>
    <div
      *ngIf="selectedFilter() === 'approvedByCs' || (htmlContent !== 'containerRequestTL' && selectedFilter() === 'approvedByTl')">
      <div>
        <input (change)="filterOrders()" [ngSignal]="filterValue" type="checkbox">
      </div>
    </div>
    <div *ngIf="selectedFilter() === 'lastUpdated'">
      <div>
        <input (change)="filterOrders()" [ngSignal]="filterValue" type="date">
      </div>
    </div>
  </div>
</div>

<div class="orderBox">
  <table>
    <tr>
      <th *ngFor="let header of tableHeaders" (click)="orderOrders(header.value)">{{header.label | transloco}}</th>
    </tr>
    @for (currOrder of dataService.allOrders(); track $index) {
    <tr>
      @for (prop of orderProperties; track $index) {
      @if (prop !== 'approvedByCs' && prop !== 'approvedByTl') {
      <td>
        {{currOrder[prop]}}
      </td>
      }@else {
        @if (currOrder[prop]) {
          <td>{{'yes' | transloco}}</td>
        }@else {
          <td>{{'no' | transloco}}</td>
        }
      
      }
      }
      <td (click)="openDialog(currOrder.checklistId)"><mat-icon>assignment</mat-icon></td>
      <td (click)="navigateToEditPage(currOrder.id)"><mat-icon>create</mat-icon></td>
      <td (click)="navigateToPage('/chat-for-order/' + currOrder.id)"><mat-icon>chat</mat-icon></td>
    </tr>
    }
  </table>
</div>