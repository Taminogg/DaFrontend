<div class="overviewBox">
  <h1>{{
    (htmlContent === "containerRequestCS" ? 'container-page-header-cs' :
    (htmlContent === "containerRequestTL" ? 'container-page-header-tl' :
    (htmlContent === "productionPlanningCS" ? 'shippment-page-header-cs' : 'shippment-page-header-tl')))
    | transloco }}
  </h1>
  @if (htmlContent === 'containerRequestCS') {
  <button (click)="navigateToPage('/new-container-order-page')">
    <h2>{{'new' | transloco}}</h2>
  </button>
  }@else if (htmlContent === 'productionPlanningCS') {
  <button (click)="navigateToPage('/new-production-planning-page')">
    <h2>{{'new' | transloco}}</h2>
  </button>
  }
</div>

<div class="searchBox">
  <label>Filter:&nbsp;</label>
  <select #currFilter (change)="setSelectedFilter(currFilter.value)">
    <option value="customername">{{'customer' | transloco}}</option>
    <option value="status">{{'status' | transloco}}</option>
    <option value="lastUpdated">{{'last-updated' | transloco}}</option>
    @if (htmlContent === 'containerRequestCS') {
    <option value="approvedByCs">{{'approved-by-cs' | transloco}}</option>
    }
    @if (htmlContent === 'containerRequestCS' || htmlContent === 'containerRequestTL') {
    <option value="approvedByTl">{{'approved-by-tl' | transloco}}</option>
    }
    @if (htmlContent === 'productionPlanningCS') {
    <option value="approvedByPpCs">{{'approved-by-cs' | transloco}}</option>
    }
    @if (htmlContent === 'productionPlanningPP' || htmlContent === 'productionPlanningCS') {
    <option value="approvedByPp">{{'approved-by-pp' | transloco}}</option>
    }
    <option value="amount">{{'amount' | transloco}}</option>
    <option value="country">{{'country' | transloco}}</option>
    <option value="sped">{{'sped' | transloco}}</option>
  </select>
  <div>
    @if (selectedFilter() === 'customername' || selectedFilter() === 'country' ||
    selectedFilter() === 'sped') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="text"
        placeholder="{{'search-placeholder' | transloco}}">
    </div>
    }
    @if (selectedFilter() === 'amount' || selectedFilter() === 'status') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue"
        type="{{selectedFilter() === 'amount' ? 'number' : 'text'}}">
    </div>
    }
    @if (selectedFilter() === 'approvedByCs' || selectedFilter() ===
    'approvedByTl' || selectedFilter() === 'approvedByPp' || selectedFilter() === 'approvedByPpCs') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="checkbox">
    </div>
    }
    @if (selectedFilter() === 'lastUpdated') {
    <div>
      <input format="dd.MM.yyyy" (change)="filterOrders()" [ngSignal]="filterValue" type="date">
    </div>
    }
  </div>
  <div class="filter-option">
    <label>{{'show-finished-orders' | transloco}}</label>
    <input (change)="filterOrders()" [ngSignal]="showFinished" type="checkbox">
  </div>
  <div class="filter-option">
    <label>{{'show-canceled-orders' | transloco}}</label>
    <input (change)="filterOrders()" [ngSignal]="showCanceled" type="checkbox">
  </div>
  <div class="filter-option">
    <label>{{'created-by' | transloco}}</label>
    <input class="simple-margin" (change)="filterOrders()" type="text" [ngSignal]="filterByCreatedByName">
  </div>

  <button class="settings-button" (click)="settingsPage()">
    <mat-icon>settings</mat-icon>
  </button>
</div>

<div class="orderBox">
  <table>
    <tr>
      <th *ngFor="let header of dataService.tableHeaders" (click)="orderOrders(header.value)">{{header.label |
        transloco}}</th>
    </tr>
    @for (currOrder of dataService.allOrders(); track $index) {
    <tr>
      @for (prop of dataService.tableHeaders; track $index) {
      @if(prop.value === 'chat'){
      <td (click)="navigateToPage('/chat-for-order/' + htmlContent + '/' + currOrder.id)"><mat-icon>chat</mat-icon></td>
      }@else if (prop.value === 'assignment') {
      <td (click)="openDialog(currOrder.checklistId)"><mat-icon>assignment</mat-icon></td>
      }@else if (prop.value === 'create') {
      <td (click)="navigateToEditPage(currOrder.id)"><mat-icon>create</mat-icon></td>
      }@else {
      <td>
        @if (prop.value === 'articleNumbers') {
        {{getArticlesForOrder(currOrder.id)}}
        }@else if(prop.value === 'factory') {
        {{getFactoriesForOrder(currOrder.id)}}
        }@else if(prop.value === 'plant'){
        {{getPlantsForOrder(currOrder.id)}}
        }@else if(prop.value === 'approvedBy'){
        @if(getApprovedByForOrder(currOrder.id)){
        {{'yes' | transloco}}
        }@else {
        {{'no' | transloco}}
        }
        }@else if(prop.value === 'lastUpdated' || prop.value === 'readyToLoad'){
        {{currOrder[prop.value] | date:'dd.MM.yyyy'}}
        }@else if(prop.value === 'status'){
        {{currOrder[prop.value] | transloco}}
        }@else {
        {{currOrder[prop.value]}}
        }
      </td>
      }
      }
    </tr>
    }
  </table>
</div>