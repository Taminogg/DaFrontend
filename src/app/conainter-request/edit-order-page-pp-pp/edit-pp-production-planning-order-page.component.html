<div class="form-container">
  <div class="form-row">
    <button class="back-button" (click)="editService.navigateToPath()">{{'back' | transloco}}</button>
    <button class="save-button" (click)="editService.generatePDFFromContent()">{{'generatePDF' | transloco}}</button>
  </div>

  <div id="contentToConvert" class="form-content">
    <div class="form-row">
      <div class="form-group">
        <label>{{'customer' | transloco}}</label>
        <input class="not-editable" readonly [ngSignal]="editService.customerName" type="text">
      </div>

      <div class="form-group">
        <label>{{'created-by' | transloco}}</label>
        <input class="not-editable" readonly [ngSignal]="editService.createdBy" type="text">
      </div>

      <div class="form-group">
        <label>{{'additional-text' | transloco}}</label>
        <input [ngSignal]="editService.additonalInformation" type="text">
      </div>
    </div>

    <form [formGroup]="myForm">
      <div formArrayName="articles">
        @for (articleGroup of articlesFormArray.controls; track $index) {
        <div [formGroup]="getFormGroup($index)">
          <div class="form-row">
            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'delivery-date' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isDateValid(getFormGroup($index).get('deliveryDate')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="date" formControlName="deliveryDate" format="dd.MM.yyyy">
            </div>

            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'short-text' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isAnyInputValid(getFormGroup($index).get('shortText')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="text" formControlName="shortText">
            </div>

            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'factory' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isAnyInputValid(getFormGroup($index).get('factory')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="text" formControlName="factory">
            </div>

            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'nozzle' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isAnyInputValid(getFormGroup($index).get('nozzle')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="text" formControlName="nozzle">
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'production-order' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isAnyInputValid(getFormGroup($index).get('productionOrder')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="text" formControlName="productionOrder">
            </div>

            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'planned-order' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isAnyInputValid(getFormGroup($index).get('plannedOrder')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="text" formControlName="plannedOrder">
            </div>

            <div class="form-group">
              <div class="header-container">
                <div>
                  <label>{{'plant' | transloco}}</label>
                </div>
                <div>
                  @if (!validationService.isAnyInputValid(getFormGroup($index).get('plant')!.value)) { <label
                    class="error-message">
                    {{'simple-error' | transloco}}</label>
                  }
                </div>
              </div>
              <input (input)="setAreArticlesValid()" type="text" formControlName="plant">
            </div>
          </div>

          <br>
          <br>

          <div class="form-row">
            <div class="form-group">
              <label>{{'article-number' | transloco}}</label>
              <input class="not-editable" readonly type="number" formControlName="articleNumber">
            </div>

            <div class="form-group">
              <label>{{'min-heigth-required' | transloco}}</label>
              <input class="not-editable" readonly type="number" formControlName="minHeigthRequired">
            </div>

            <div class="form-group">
              <div class="checkbox-container">
                <label class="checkbox-label">{{'inquiry-for-fixed-order' | transloco}}</label>
                <input class="checkbox-input" type="checkbox" formControlName="inquiryForFixedOrder">
              </div>
            </div>

            <div class="form-group">
              <div class="checkbox-container">
                <label class="checkbox-label">{{'inquiry-for-quotation' | transloco}}</label>
                <input class="checkbox-input" type="checkbox" formControlName="inquiryForQuotation"><!-- -->
              </div>
            </div>

            <div class="form-group">
              <label>{{'desired-delivery-date' | transloco}}</label>
              <input class="not-editable" readonly format="dd.MM.yyyy" type="date"
                formControlName="desiredDeliveryDate">
            </div>
          </div>
          <hr>
        </div>
        }
      </div>
    </form>

    <div class="form-row">
      <div class="form-group">
        <button class="save-button" [disabled]="!isAllValid()" (click)="saveArticles()">{{'save' | transloco}}</button>
      </div>
      <div class="form-group">
        <button class="save-button" [disabled]="!isAllValid()" (click)="publish()">{{'save-and-publish' |
          transloco}}</button>
      </div>
    </div>
  </div>