<div class="form-row">
  <button class="back-button" (click)="containerRequestPage()">{{'back' | transloco}}</button>
  <button class="savebutton" (click)="generatePDF()">{{'generatePDF' | transloco}}</button>
</div>

<div id="contentToConvert">
  <div class="form-row">
    <div class="form-group">
      <label>{{'status' | transloco}}</label>
      <input #txtStatus type="string" value="{{currOrder().status}}" (change)="status.set(txtStatus.value)">
      @if(!isStatusValid()){
      <label class="error-message">{{'error-message-status' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'customer' | transloco}}</label>
      <input #txtCustName type="text" value="{{currOrder().customerName}}"
        (change)="customerName.set(txtCustName.value)">
      @if(!isCustomerValid()){
      <label class="error-message">{{'error-message-customer' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'created-by' | transloco}}</label>
      <input #txtCreatedBy type="text" value="{{currOrder().createdBy}}" (change)="createdBy.set(txtCreatedBy.value)">
      @if(!isCreatedByValid()){
      <label class="error-message">{{'error-message-created-by' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'amount' | transloco}}</label>
      <input #txtAmount min="1" type="number" value="{{currOrder().amount}}" (change)="amount.set(+txtAmount.value)">
      @if(!isAmountValid()){
      <label class="error-message">{{'error-message-amount' | transloco}}</label>
      }
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label>{{'checklist' | transloco}}</label>
      <select #txtChecklistId (change)="checklistId.set(+txtChecklistId.value)" value="{{currOrder().checklistId}}">
        @for (currChecklist of allCheckliststs(); track $index) {
        <option value="{{currChecklist.id}}">{{currChecklist.customerName}}</option>
        }
      </select>
    </div>

    <div class="form-group">
      <label>{{'loading-plattform' | transloco}}</label>
      <input #txtLoadingPlattform type="text" value="{{currCsInquiry().loadingPlattform}}"
        (change)="loadingPlattform.set(txtLoadingPlattform.value)">
      @if(!isLoadingPlattfromValid()){
      <label class="error-message">{{'error-message-loading-plattform' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'ab-nr' | transloco}}</label>
      <input #txtAbNumber type="text" value="{{currCsInquiry().abnumber}}" (change)="abnumber.set(+txtAbNumber.value)">
      @if(!isAbNumberValid()){
      <label class="error-message">{{'error-message-ab-number' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'gross-weight-in-kg' | transloco}}</label>
      <input #txtBruttoWeight type="text" value="{{currCsInquiry().grossWeightInKg}}"
        (change)="grossWeightInKg.set(+txtBruttoWeight.value)">
      @if(!isGrossWeightInKgValid()){
      <label class="error-message">{{'error-message-gross-weight' | transloco}}</label>
      }
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label>{{'container-size-a' | transloco}}</label>
      <input #txtContainerSizeA type="text" value="{{currCsInquiry().containersizeA}}"
        (change)="containersizeA.set(+txtContainerSizeA.value)">
      @if(!isContainerSizeAValid()){
      <label class="error-message">{{'error-message-container-size' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'container-size-b' | transloco}}</label>
      <input #txtContainerSizeB type="text" value="{{currCsInquiry().containersizeB}}"
        (change)="containersizeB.set(+txtContainerSizeB.value)">
      @if(!isContainerSizeBValid()){
      <label class="error-message">{{'error-message-container-size' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'container-size-hc' | transloco}}</label>
      <input #txtContainerSizeHc type="text" value="{{currCsInquiry().containersizeHc}}"
        (change)="containersizeHc.set(+txtContainerSizeHc.value)">
      @if(!isContainerSizeHcValid()){
      <label class="error-message">{{'error-message-container-size' | transloco}}</label>
      }
    </div>

    <div class="form-group">
      <label>{{'incoterm' | transloco}}</label>
      <input #txtIncoterm type="text" value="{{currCsInquiry().incoterm}}" (change)="incoterm.set(txtIncoterm.value)">
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <div class="checkbox-container">
        <label class="checkbox-label">{{'free-detention' | transloco}}</label>
        <input #txtFreeDetention class="checkbox-input" type="checkbox" [checked]="currCsInquiry().freeDetention"
          value="{{currCsInquiry().freeDetention}}" (change)="freeDetention.set(txtFreeDetention.checked)">
      </div>
    </div>

    <div class="form-group">
      <div class="checkbox-container">
        <label class="checkbox-label">{{'thctb' | transloco}}</label>
        <input #txtTHCTB class="checkbox-input" type="checkbox" [checked]="currCsInquiry().thctb"
          (change)="thctb.set(txtTHCTB.checked)">
      </div>
    </div>
  </div>

  <div class="form-row">
    <div class="form-group">
      <label>{{'ready-to-load' | transloco}}</label>
      <input #txtReadyToLoad type="text" value="{{currCsInquiry().readyToLoad}}"
        (change)="readyToLoad.set(txtReadyToLoad.value)">
    </div>

    <div class="form-group">
      <label>Zusatztext</label>
      <input #txtAdditionalInformation value="{{currOrder().additionalInformation}}" (change)="additonalInformation.set(txtAdditionalInformation.value)" type="text">
    </div>
  </div>
</div>

<form [formGroup]="myForm">
  <div formArrayName="articles">
    @for (articleGroup of articlesFormArray.controls; track $index) {
    <div [formGroup]="getFormGroup($index)">
      <div class="form-row">
        <div class="form-group">
          <label>{{'article-number' | transloco}}</label>
          <input type="number" formControlName="articleNumber" placeholder="Enter an article number">
        </div>

        <div class="form-group">
          <label>{{'direct-line' | transloco}}</label>
          <input type="checkbox" formControlName="directline">
        </div>

        @if (getFormGroup($index).get('directline')!.value) {
        <div class="form-group">
          <label>{{'pallet-amount' | transloco}}</label>
          <input type="number" formControlName="palletAmount" placeholder="Enter pallet amount">
        </div>
        }
        @else {
        <div class="form-group"></div>
        }
      </div>
      @if (articlesFormArray.controls.length > 1) {
      <button class="removeArticle-button" type="button" (click)="removeArticle($index)">{{'remove-article' |
        transloco}}</button>
      }
    </div>
    }
  </div>
  <button class="addArticle-button" type="button" (click)="addArticle(1,1,false,false, 0)">{{'add-article' |
    transloco}}</button>
</form>

<div class="form-row">
  <div class="form-group">
    <button class="save-button" [disabled]="!isAllValid()" (click)="saveOrder()">{{'save' | transloco}}</button>
  </div>
  <div class="form-group">
    <button class="save-button" [disabled]="!isAllValid()" (click)="publish()">{{'save-and-publish' |
      transloco}}</button>
  </div>
</div>