<div class="overviewBox">
  <h1>{{'shippment-page-header' | transloco}}</h1>

  <button (click)="navigateToPage('/new-shippment-order-page')">
    <h2>{{'new' | transloco}}</h2>
  </button>
</div>

<div class="searchBox">
  <label>Filter:&nbsp;</label>
  <select #currFilter (change)="setSelectedFilter(currFilter.value)">
    <option value="customername">{{'customer' | transloco}}</option>
    <option value="createdBy">{{'created-by' | transloco}}</option>
    <option value="status">{{'status' | transloco}}</option>
    <option value="lastUpdated">{{'last-updated' | transloco}}</option>
    <option value="approved">{{'approved' | transloco}}</option>
    <option value="amount">{{'amount' | transloco}}</option>
    <option value="country">{{'country' | transloco}}</option>
    <option value="sped">{{'sped' | transloco}}</option>
  </select>
  <div>

    @if (selectedFilter() === 'customername' || selectedFilter() === 'createdBy' || selectedFilter() === 'country'|| selectedFilter() === 'sped') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="text"
        placeholder="{{'search-placeholder' | transloco}}">
    </div>
    }

    @if (selectedFilter() === 'amount' || selectedFilter() === 'status') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="number">
    </div>
    }

    @if (selectedFilter() === 'approved') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="checkbox">
    </div>
    }

    @if (selectedFilter() === 'lastUpdated') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="date">
    </div>
    }

  </div>
</div>

<div class="orderBox">
  <table>
    <tr>
      <th>{{'ab-nr' | transloco}}</th>
      <th>Dispatch-Date</th>
      <th (click)="orderOrders('customer')">{{'customer' | transloco}}</th>
      <th (click)="orderOrders('createdBy')">{{'created-by' | transloco}}</th>
      <th (click)="orderOrders('status')">{{'status' | transloco}}</th>
      <th>{{'approved' | transloco}}</th>
      <th (click)="orderOrders('lastUpdated')">{{'last-updated' | transloco}}</th>
      <th (click)="orderOrders('sped')">{{'sped' | transloco}}</th>
      <th>{{'checklist' | transloco}}</th>
      <th>{{'edit' | transloco}}</th>
      <th>{{'chat' | transloco}}</th>
    </tr>
    @for (currOrder of dataService.allOrders(); track $index) {
    <tr>
      <td>{{getAbNumberForOrder(currOrder.id)}}</td>
      <td>Dispatch-Date</td>
      <td>{{currOrder.customerName}}</td>
      <td>{{currOrder.createdBy}}</td>
      <td>{{currOrder.status}}</td>
      @if (currOrder.approved) {
      <td>{{'yes' | transloco}}</td>
      }
      @else
      {
      <td>{{'no' | transloco}}</td>
      }
      <td>{{currOrder.lastUpdated | date: 'dd.MM.yyyy'}}</td>
      <td>{{getSpedNumberForOrder(currOrder.id)}}</td>
      <td (click)="openDialog(currOrder.checklistId)"><mat-icon>assignment</mat-icon></td>
      <td (click)="navigateToPage('/edit-shippment-order-page/' + currOrder.id)"><mat-icon>create</mat-icon></td>
      <td (click)="navigateToPage('/chat-for-order/' + currOrder.id)"><mat-icon>chat</mat-icon></td>
    </tr>
    }
  </table>
</div>