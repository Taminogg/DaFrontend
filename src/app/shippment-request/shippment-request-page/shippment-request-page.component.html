<div class="overviewBox">
  <h1>{{'shippment-page-header' | transloco}}</h1>

  <button (click)="navigateToPage('/new-shippment-order-page')">
    <h2>{{'new' | transloco}}</h2>
  </button>
</div>

<div class="searchBox">
  <label>Filter: </label>
  <select #currFilter (change)="setSelectedFilter(currFilter.value)">
    <option value="Customername">{{'customername' | transloco}}</option>
    <option value="Created by">{{'created-by' | transloco}}</option>
    <option value="Status">{{'status' | transloco}}</option>
    <option value="Approved">{{'approved' | transloco}}</option>
    <option value="Amount">{{'amount' | transloco}}</option>
  </select>
  <div>
    @if (selectedFilter() === 'Customername' || selectedFilter() === 'Created by' || selectedFilter() === 'Last updated') {
    <div>
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="text"
        placeholder="{{'search-placeholder' | transloco}}">
    </div>
    }

    <div>
      @if (selectedFilter() === 'Amount' || selectedFilter() === 'Status') {
      <input (change)="filterOrders()" [ngSignal]="filterValue" type="number">
      }
    </div>

    <div>
      @if (selectedFilter() === 'Approved') {
        <input (change)="filterOrders()" [ngSignal]="filterValue" type="checkbox">
      }
    </div>
  </div>
</div>

<div class="orderBox">
  <table>
    <tr>
      <th>{{'order' | transloco}}</th>
      <th>{{'customer' | transloco}}</th>
      <th>{{'created-by' | transloco}}</th>
      <th>{{'article' | transloco}}</th>
      <th>{{'status' | transloco}}</th>
      <th>{{'amount' | transloco}}</th>
      <th>{{'approved' | transloco}}</th>
      <th>{{'factory' | transloco}}</th>
      <th>{{'last-updated' | transloco}}</th>
      <th>{{'plant' | transloco}}</th>
      <th>{{'checklist' | transloco}}</th>
      <th>{{'edit' | transloco}}</th>
      <th>{{'chat' | transloco}}</th>
    </tr>
    @for (currOrder of dataService.allOrders(); track $index) {
    <tr>
      <td>{{currOrder.id}}</td>
      <td>{{currOrder.customerName}}</td>
      <td>{{currOrder.createdBy}}</td>
      <td>{{getArticleNumberForOrder(currOrder.id)}}</td>
      <td>{{currOrder.status}}</td>
      <td>{{currOrder.amount}}</td>
      <td>{{getApprovedString(currOrder.approved)}}</td>
      <td>WERK</td>
      <td>{{currOrder.lastUpdated | date: 'dd.MM.yyyy'}}</td>
      <td>ANLAGE</td>
      <td (click)="openDialog(currOrder.checklistId)"><mat-icon>assignment</mat-icon></td>
      <td (click)="navigateToPage('/edit-shippment-order-page/' + currOrder.id)"><mat-icon>create</mat-icon></td>
      <td (click)="navigateToPage('/chat-for-order/' + currOrder.id)"><mat-icon>chat</mat-icon></td>
    </tr>
    }
  </table>
</div>